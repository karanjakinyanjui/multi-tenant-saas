# Sealed Secrets Controller Installation
# Install using: kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml

# Example SealedSecret for backend database credentials
apiVersion: bitnami.com/v1alpha1
kind: SealedSecret
metadata:
  name: backend-secrets
  namespace: youth-saas-system
spec:
  encryptedData:
    # These values should be encrypted using kubeseal
    # Example: echo -n "mypassword" | kubeseal --raw --from-file=/dev/stdin --namespace youth-saas-system --name backend-secrets
    db-host: AgA...  # Encrypted value
    db-user: AgA...  # Encrypted value
    db-password: AgA...  # Encrypted value
    db-name: AgA...  # Encrypted value
    jwt-secret: AgA...  # Encrypted value
  template:
    metadata:
      name: backend-secrets
      namespace: youth-saas-system
    type: Opaque
---
# Instructions for creating sealed secrets:
# 1. Install sealed-secrets controller:
#    kubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/controller.yaml
#
# 2. Install kubeseal CLI:
#    wget https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.24.0/kubeseal-linux-amd64 -O kubeseal
#    sudo install -m 755 kubeseal /usr/local/bin/kubeseal
#
# 3. Create a regular secret file:
#    kubectl create secret generic backend-secrets \
#      --from-literal=db-host=postgres.youth-saas-system.svc.cluster.local \
#      --from-literal=db-user=admin \
#      --from-literal=db-password=your-secure-password \
#      --from-literal=db-name=youth_saas \
#      --from-literal=jwt-secret=your-jwt-secret \
#      --namespace youth-saas-system \
#      --dry-run=client -o yaml > secret.yaml
#
# 4. Seal the secret:
#    kubeseal -f secret.yaml -w sealed-secret.yaml
#
# 5. Apply the sealed secret:
#    kubectl apply -f sealed-secret.yaml
#
# 6. Delete the plaintext secret file:
#    rm secret.yaml
